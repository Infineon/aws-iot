<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cypress AWS IoT Library: AWSIoTClient Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="cypress_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cypress AWS IoT Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_a_w_s_io_t_client.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">AWSIoTClient Class Reference<div class="ingroups"><a class="el" href="group__aws__iot.html">AWS IoT library</a> &raquo; <a class="el" href="group__aws__iot__classes.html">AWS IoT and Greengrass base class and sub-classes</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<div class="textblock"><p>AWS IoT client class. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a88313cac0bab5ecb04b47724027bd9e7"><td class="memItemLeft" align="right" valign="top"><a id="a88313cac0bab5ecb04b47724027bd9e7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_w_s_io_t_client.html#a88313cac0bab5ecb04b47724027bd9e7">AWSIoTClient</a> ()</td></tr>
<tr class="memdesc:a88313cac0bab5ecb04b47724027bd9e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor of <a class="el" href="class_a_w_s_io_t_client.html" title="AWS IoT client class. ">AWSIoTClient</a> class Initializes <a class="el" href="class_a_w_s_io_t_client.html" title="AWS IoT client class. ">AWSIoTClient</a> class members to default values. <br /></td></tr>
<tr class="separator:a88313cac0bab5ecb04b47724027bd9e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a13ac1f6ec0c7026856515a067ca3db"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_w_s_io_t_client.html#a4a13ac1f6ec0c7026856515a067ca3db">AWSIoTClient</a> (NetworkInterface *network, const char *thing_name, const char *private_key, uint16_t key_length, const char *certificate, uint16_t certificate_length)</td></tr>
<tr class="memdesc:a4a13ac1f6ec0c7026856515a067ca3db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes <a class="el" href="class_a_w_s_io_t_client.html" title="AWS IoT client class. ">AWSIoTClient</a> class members.  <a href="#a4a13ac1f6ec0c7026856515a067ca3db">More...</a><br /></td></tr>
<tr class="separator:a4a13ac1f6ec0c7026856515a067ca3db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f046d2e4756e286bb9f370522853cdf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_w_s_io_t_client.html#a0f046d2e4756e286bb9f370522853cdf">set_command_timeout</a> (int command_timeout)</td></tr>
<tr class="memdesc:a0f046d2e4756e286bb9f370522853cdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set command timeout for AWS IoT client library commands such as connect, publish, subscribe and unsubscribe.  <a href="#a0f046d2e4756e286bb9f370522853cdf">More...</a><br /></td></tr>
<tr class="separator:a0f046d2e4756e286bb9f370522853cdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81e2b45c25aab232faa9552e4f132dd6"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_w_s_io_t_client.html#a81e2b45c25aab232faa9552e4f132dd6">discover</a> (<a class="el" href="group__aws__iot__enums.html#gabaed60616f9255ef2fbe18b69ae03e4d">aws_iot_transport_type_t</a> transport, const char *uri, const char *root_ca, uint16_t root_ca_length, <a class="el" href="group__aws__iot__struct.html#gac7568caafde99d4fbda2e9c44fa32ce3">aws_greengrass_callback</a> gg_cb)</td></tr>
<tr class="memdesc:a81e2b45c25aab232faa9552e4f132dd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Discovers Greengrass cores(groups) of which this 'Thing' is part of.  <a href="#a81e2b45c25aab232faa9552e4f132dd6">More...</a><br /></td></tr>
<tr class="separator:a81e2b45c25aab232faa9552e4f132dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a376345735407abec8d28bce7ec3874b3"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_w_s_io_t_client.html#a376345735407abec8d28bce7ec3874b3">connect</a> (<a class="el" href="structaws__connect__params__t.html">aws_connect_params_t</a> conn_params, <a class="el" href="structaws__endpoint__params__t.html">aws_endpoint_params_t</a> endpoint_params)</td></tr>
<tr class="memdesc:a376345735407abec8d28bce7ec3874b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establishes connection to an AWS IoT or Greengrass core This API is blocking and shall return when CONACK is received from server or timeout occurs.  <a href="#a376345735407abec8d28bce7ec3874b3">More...</a><br /></td></tr>
<tr class="separator:a376345735407abec8d28bce7ec3874b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080dd29377528f0a1d20574872000dca"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_w_s_io_t_client.html#a080dd29377528f0a1d20574872000dca">publish</a> (const char *topic, const char *data, uint32_t length, <a class="el" href="structaws__publish__params__t.html">aws_publish_params_t</a> pub_params)</td></tr>
<tr class="memdesc:a080dd29377528f0a1d20574872000dca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publishes message to user defined topic on AWS cloud This API is blocking and shall return when PUBACK is received from server or timeout occurs.  <a href="#a080dd29377528f0a1d20574872000dca">More...</a><br /></td></tr>
<tr class="separator:a080dd29377528f0a1d20574872000dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ba527f506f1e5a0da3417b075ac6bd8"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_w_s_io_t_client.html#a1ba527f506f1e5a0da3417b075ac6bd8">subscribe</a> (const char *topic, <a class="el" href="group__aws__iot__enums.html#ga4166e6ed6124984ef6561360c2ba8bda">aws_iot_qos_level_t</a> qos, <a class="el" href="group__aws__iot__struct.html#ga4509593ffd5cf5a75d6e0de00d0baf5f">subscriber_callback</a> cb)</td></tr>
<tr class="memdesc:a1ba527f506f1e5a0da3417b075ac6bd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribes to the user defined topic on AWS cloud This API is blocking and shall return when SUBACK is received from server or timeout occurs.  <a href="#a1ba527f506f1e5a0da3417b075ac6bd8">More...</a><br /></td></tr>
<tr class="separator:a1ba527f506f1e5a0da3417b075ac6bd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7ef6e431104ee8dd16819dc9933a01b"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_w_s_io_t_client.html#ae7ef6e431104ee8dd16819dc9933a01b">unsubscribe</a> (char *topic)</td></tr>
<tr class="memdesc:ae7ef6e431104ee8dd16819dc9933a01b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsubscribes from the topic that has been previously subscribed to on AWS cloud.  <a href="#ae7ef6e431104ee8dd16819dc9933a01b">More...</a><br /></td></tr>
<tr class="separator:ae7ef6e431104ee8dd16819dc9933a01b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f13614937434ec41b6d4b07d1e4f1b5"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_w_s_io_t_client.html#a8f13614937434ec41b6d4b07d1e4f1b5">yield</a> (unsigned long timeout_ms=1000L)</td></tr>
<tr class="memdesc:a8f13614937434ec41b6d4b07d1e4f1b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">A call to this API must be made within the keepAlive interval to keep the MQTT connection alive.  <a href="#a8f13614937434ec41b6d4b07d1e4f1b5">More...</a><br /></td></tr>
<tr class="separator:a8f13614937434ec41b6d4b07d1e4f1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2424f063a655bf79c17cc17fbb1549f5"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_w_s_io_t_client.html#a2424f063a655bf79c17cc17fbb1549f5">disconnect</a> ()</td></tr>
<tr class="memdesc:a2424f063a655bf79c17cc17fbb1549f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnects from AWS IoT endpoint.  <a href="#a2424f063a655bf79c17cc17fbb1549f5">More...</a><br /></td></tr>
<tr class="separator:a2424f063a655bf79c17cc17fbb1549f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4a13ac1f6ec0c7026856515a067ca3db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a13ac1f6ec0c7026856515a067ca3db">&#9670;&nbsp;</a></span>AWSIoTClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AWSIoTClient::AWSIoTClient </td>
          <td>(</td>
          <td class="paramtype">NetworkInterface *&#160;</td>
          <td class="paramname"><em>network</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>thing_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>private_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>certificate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>certificate_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes <a class="el" href="class_a_w_s_io_t_client.html" title="AWS IoT client class. ">AWSIoTClient</a> class members. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">network</td><td>: Network interface (Wi-Fi, Ethernet etc ) defined by Mbed OS </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thing_name</td><td>: Name of the IoT thing </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">private_key</td><td>: Private key of device/thing </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>: Length of private key of device/thing </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">certificate</td><td>: Certificate of device/thing </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">certificate_length</td><td>: Length of certificate of device/thing </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0f046d2e4756e286bb9f370522853cdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f046d2e4756e286bb9f370522853cdf">&#9670;&nbsp;</a></span>set_command_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AWSIoTClient::set_command_timeout </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>command_timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set command timeout for AWS IoT client library commands such as connect, publish, subscribe and unsubscribe. </p>
<p>Default value is set to 5000ms. Use this API to change the timeout value. This API needs to be called before the MQTT connect operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">command_timeout</td><td>: timeout in milliseconds </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a81e2b45c25aab232faa9552e4f132dd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81e2b45c25aab232faa9552e4f132dd6">&#9670;&nbsp;</a></span>discover()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t AWSIoTClient::discover </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__aws__iot__enums.html#gabaed60616f9255ef2fbe18b69ae03e4d">aws_iot_transport_type_t</a>&#160;</td>
          <td class="paramname"><em>transport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>root_ca</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>root_ca_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__aws__iot__struct.html#gac7568caafde99d4fbda2e9c44fa32ce3">aws_greengrass_callback</a>&#160;</td>
          <td class="paramname"><em>gg_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Discovers Greengrass cores(groups) of which this 'Thing' is part of. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">transport</td><td>: AWS transport to be used </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uri</td><td>: URI of the AWS endpoint </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">root_ca</td><td>: Root CA certificate </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">root_ca_length</td><td>: Length of Root CA certificate </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gg_cb</td><td>: Greengrass discovery payload callback - Notifies application of Greengrass Cores information</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cy_rslt_t : CY_RSLT_SUCCESS - on success, CY_RSLT_AWS_ERROR_INVALID_CLIENT_KEY, CY_RSLT_AWS_ERROR_INVALID_ROOTCA, CY_RSLT_AWS_ERROR_CONNECT_FAILED, CY_RSLT_AWS_ERROR_HTTP_FAILURE - On error ( <a class="el" href="group__aws__iot__defines.html">AWS IoT library error codes</a> ) </dd></dl>

</div>
</div>
<a id="a376345735407abec8d28bce7ec3874b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a376345735407abec8d28bce7ec3874b3">&#9670;&nbsp;</a></span>connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t AWSIoTClient::connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structaws__connect__params__t.html">aws_connect_params_t</a>&#160;</td>
          <td class="paramname"><em>conn_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structaws__endpoint__params__t.html">aws_endpoint_params_t</a>&#160;</td>
          <td class="paramname"><em>endpoint_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establishes connection to an AWS IoT or Greengrass core This API is blocking and shall return when CONACK is received from server or timeout occurs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_params</td><td>: Connection parameters </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endpoint_params</td><td>: AWS IoT Endpoint parameters</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cy_rslt_t : CY_RSLT_SUCCESS - On success CY_RSLT_AWS_ERROR_CONNECT_FAILED, CY_RSLT_AWS_ERROR_INVALID_ROOTCA, CY_RSLT_AWS_ERROR_INVALID_CLIENT_KEY - On error ( <a class="el" href="group__aws__iot__defines.html">AWS IoT library error codes</a> ) </dd></dl>

</div>
</div>
<a id="a080dd29377528f0a1d20574872000dca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a080dd29377528f0a1d20574872000dca">&#9670;&nbsp;</a></span>publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t AWSIoTClient::publish </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structaws__publish__params__t.html">aws_publish_params_t</a>&#160;</td>
          <td class="paramname"><em>pub_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publishes message to user defined topic on AWS cloud This API is blocking and shall return when PUBACK is received from server or timeout occurs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>: Contains the topic to which the message is to be published </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>: Pointer to the message to be published </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>: Length of the message pointed by 'message' </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pub_params</td><td>: Publish parameters</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cy_rslt_t : CY_RSLT_SUCCESS - on success, CY_RSLT_AWS_ERROR_PUBLISH_FAILED - On error ( <a class="el" href="group__aws__iot__defines.html">AWS IoT library error codes</a> ) </dd></dl>

</div>
</div>
<a id="a1ba527f506f1e5a0da3417b075ac6bd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ba527f506f1e5a0da3417b075ac6bd8">&#9670;&nbsp;</a></span>subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t AWSIoTClient::subscribe </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__aws__iot__enums.html#ga4166e6ed6124984ef6561360c2ba8bda">aws_iot_qos_level_t</a>&#160;</td>
          <td class="paramname"><em>qos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__aws__iot__struct.html#ga4509593ffd5cf5a75d6e0de00d0baf5f">subscriber_callback</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subscribes to the user defined topic on AWS cloud This API is blocking and shall return when SUBACK is received from server or timeout occurs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>: Contains the topic to be subscribed to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">qos</td><td>: QoS level to be used for receiving the message on the given topic </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>: Subscriber callback for the topic to receive the messages</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cy_rslt_t : CY_RSLT_SUCCESS - on success CY_RSLT_AWS_ERROR_SUBSCRIBE_FAILED - On error ( <a class="el" href="group__aws__iot__defines.html">AWS IoT library error codes</a> ) </dd></dl>

</div>
</div>
<a id="ae7ef6e431104ee8dd16819dc9933a01b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7ef6e431104ee8dd16819dc9933a01b">&#9670;&nbsp;</a></span>unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t AWSIoTClient::unsubscribe </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsubscribes from the topic that has been previously subscribed to on AWS cloud. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>: Contains the topic to be unsubscribed from</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cy_rslt_t : CY_RSLT_SUCCESS - on success CY_RSLT_AWS_ERROR_UNSUBSCRIBE_FAILED - On error ( <a class="el" href="group__aws__iot__defines.html">AWS IoT library error codes</a> ) </dd></dl>

</div>
</div>
<a id="a8f13614937434ec41b6d4b07d1e4f1b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f13614937434ec41b6d4b07d1e4f1b5">&#9670;&nbsp;</a></span>yield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t AWSIoTClient::yield </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>timeout_ms</em> = <code>1000L</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A call to this API must be made within the keepAlive interval to keep the MQTT connection alive. </p>
<p>This API can be invoked if no other MQTT operation is needed. This will also allow messages to be received.</p>
<p><a class="el" href="class_a_w_s_io_t_client.html" title="AWS IoT client class. ">AWSIoTClient</a> is implemented on top of Eclipse MQTT library which are single threaded. Calling publish and yield simultaneously can lead to a crash as the underlying Eclipse Paho MQTT library APIs are not thread safe. Therefore, publish and subscribe should be handled by a single thread. For better efficiency, the application should typically be in yield, except when publishing.</p>
<p>For simultaneous publish and subscribe, Async mode communication should be supported in MQTT core library. But in current Eclipse MQTT library version only Sync mode is supported.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_ms</td><td>: Time to wait, in milliseconds. Recommend threshold timeout value 1000ms in order to allow adequate time for the system to receive and decode data. Once Yield starts receiving data, it will not return even if timer(timeout_ms) expires. It reads complete data and returns.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cy_rslt_t : CY_RSLT_SUCCESS - on success CY_RSLT_AWS_ERROR_INVALID_YIELD_TIMEOUT,CY_RSLT_AWS_ERROR_DISCONNECTED - On error ( <a class="el" href="group__aws__iot__defines.html">AWS IoT library error codes</a> ) </dd></dl>

</div>
</div>
<a id="a2424f063a655bf79c17cc17fbb1549f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2424f063a655bf79c17cc17fbb1549f5">&#9670;&nbsp;</a></span>disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t AWSIoTClient::disconnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnects from AWS IoT endpoint. </p>
<dl class="section return"><dt>Returns</dt><dd>cy_rslt_t : CY_RSLT_SUCCESS - on success CY_RSLT_AWS_ERROR_DISCONNECT_FAILED - On error ( <a class="el" href="group__aws__iot__defines.html">AWS IoT library error codes</a> ) </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Cypress AWS IoT Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
</body>
</html>
